
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Defining &amp; Proving Security &#8212; Programming MPC</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chapters/chapter03';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Multiplication Triples" href="chapter04.html" />
    <link rel="prev" title="Additive Secret Sharing" href="chapter02.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Programming MPC - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Programming MPC - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Programming MPC
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="chapter01.html">Distributed Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter02.html">Additive Secret Sharing</a></li>



<li class="toctree-l1 current active"><a class="current reference internal" href="#">Defining &amp; Proving Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter04.html">Multiplication Triples</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter05.html">Applying Arithmetic MPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter06.html">Oblivious Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter07.html">The GMW Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter08.html">Applying Binary MPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter09.html">Shamir Secret Sharing</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter10.html">The BGW Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="chapter11.html">Garbled Circuits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/jnear/programming-mpc" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/jnear/programming-mpc/issues/new?title=Issue%20on%20page%20%2Fchapters/chapter03.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/chapters/chapter03.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Defining & Proving Security</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#threat-models">Threat Models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-adversary-and-corruption">The Adversary and Corruption</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#semi-honest-and-malicious-security">Semi-Honest and Malicious Security</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#honest-and-dishonest-majorities">Honest and Dishonest Majorities</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-many-participants">How Many Participants?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-security-the-real-ideal-paradigm">Defining Security: The Real/Ideal Paradigm</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-ideal-world-and-ideal-functionality">The Ideal World and Ideal Functionality</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-real-world">The Real World</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-simulator-and-simulator-security">The Simulator and Simulator Security</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#proving-correctness">Proving Correctness</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#proving-semi-honest-security-with-a-simulator">Proving Semi-Honest Security with a Simulator</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#constraint-moves">Constraint Moves</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hybrid-moves">Hybrid Moves</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="defining-proving-security">
<h1>Defining &amp; Proving Security<a class="headerlink" href="#defining-proving-security" title="Link to this heading">#</a></h1>
<p>This chapter discusses how to prove that a protocol is secure. We start with the definition of a threat model, which is a prerequisite for proving security. Then, we describe the most common proof technique in MPC: simulator proofs in the real/ideal paradigm.</p>
<section id="threat-models">
<h2>Threat Models<a class="headerlink" href="#threat-models" title="Link to this heading">#</a></h2>
<p>A <em>threat model</em> describes the assumptions we make about the behavior of parties participating in a secure protocol.</p>
<p>When we argue (or prove) that a protocol is secure, we do so with respect to a particular threat model. The idea of security makes sense only in the context of a threat model, as we’ll see in this chapter, so a secure protocol should always come with a complete description of the intended threat model.</p>
<section id="the-adversary-and-corruption">
<h3>The Adversary and Corruption<a class="headerlink" href="#the-adversary-and-corruption" title="Link to this heading">#</a></h3>
<p>The <em>adversary</em> is a conceptual abstraction of what we’re trying to defend against. “The adversary” is typically thought of as a single entity who may <em>corrupt</em> some of the parties participating in the protocol. Corrupted parties reveal everything they know to the adversary (and in some cases, follow the adversary’s commands). The adversary can learn or compute anything that any of the corrupted parties could learn or compute on their own, and the notion of collusion between parties is captured by the idea that multiple parties may be corrupted simultaneously and the adversary learns all of their combined knowledge.</p>
<p>Parties that are not corrupted are called <em>honest</em>. We typically assume that honest parties do not share any information with any other party, except as directed by the protocol.</p>
</section>
<section id="semi-honest-and-malicious-security">
<h3>Semi-Honest and Malicious Security<a class="headerlink" href="#semi-honest-and-malicious-security" title="Link to this heading">#</a></h3>
<p>Honest parties always follow the protocol. But how do corrupted parties behave?</p>
<p>In the <em>semi-honest</em> (also called <em>passive</em>) model, corrupted parties <em>also</em> follow the protocol. In this model, <em>all</em> parties follow the protocol.</p>
<p>In the <em>malicious</em> (also called <em>active</em>) model, corrupted parties <em>may deviate</em> from the protocol, as instructed by the adversary. In this model, honest parties still follow the protocol, but corrupted ones don’t.</p>
<p>Malicious security is clearly the stronger threat model - it makes fewer assumptions about the behavior of corrupted parties. Which one is “correct”? There is no single right answer - it depends on what expectations you can safely make about how parties running the protocol will behave in real life. In particular, is it realistic to believe that corrupted parties will still follow the protocol? In most cases, probably not - so semi-honest security is typically considered a fairly weak threat model.</p>
<p>Why consider semi-honest security at all, then? It turns out that building protocols with semi-honest security is often much easier than building malicious-secure protocols, and semi-honest protocols can often be a useful stepping-stone to more complicated malicious-secure ones. We’ll see examples of this in later chapters.</p>
</section>
<section id="honest-and-dishonest-majorities">
<h3>Honest and Dishonest Majorities<a class="headerlink" href="#honest-and-dishonest-majorities" title="Link to this heading">#</a></h3>
<p>Besides semi-honest and malicious, the other major consideration in a threat model is: how many parties may be corrupted?</p>
<p>In the <em>honest majority</em> setting, we assume that a majority of the parties are honest (not corrupted).</p>
<p>In the <em>dishonest majority</em> setting (also called <em><span class="math notranslate nohighlight">\(n-1\)</span> security</em>) we assume that <span class="math notranslate nohighlight">\(n-1\)</span> out of the <span class="math notranslate nohighlight">\(n\)</span> parties may be corrupted - in other words, everyone except a single person may be controlled by the adversary!</p>
<p>The dishonest majority assumption is the strongest one we can make. If <span class="math notranslate nohighlight">\(n\)</span> parties are corrupted, then security is impossible (or maybe vacuous?) - the adversary knows everything all <span class="math notranslate nohighlight">\(n\)</span> parties know, including their secrets.</p>
<p>The dishonest majority assumption is clearly stronger than the honest majority assumption, but assuming an honest majority often makes it much easier to construct secure protocols - we’ll see several examples of protocols in later chapters. In real life, an honest majority might be a very reasonable assumption - in many cases, secure protocols are designed to protect against rare “bad actors” rather than situations where most participants are behaving badly.</p>
<p>In protocols that involve different classes of parties (e.g. clients and servers), it’s common to state the assumptions precisely in terms of those classes, and it’s possible to mix the two (e.g. we assume an honest majority of clients, but a dishonest majority of servers).</p>
<p>It’s also common to be more precise about how large the honest majority is. Many secure protocols for <a class="reference external" href="https://en.wikipedia.org/wiki/Federated_learning">federated learning</a>, for example, assume that an even smaller fraction of parties may be corrupted (e.g. as few as 5% or 10%). For protocols involving hundreds or even thousands of parties, this may be a very reasonable assumption - it’s generally more difficult for an adversary to corrupt a large number of parties in real life.</p>
</section>
<section id="how-many-participants">
<h3>How Many Participants?<a class="headerlink" href="#how-many-participants" title="Link to this heading">#</a></h3>
<p>WIP (2pc vs 3pc vs mpc, do more parties make it better?)</p>
</section>
</section>
<section id="defining-security-the-real-ideal-paradigm">
<h2>Defining Security: The Real/Ideal Paradigm<a class="headerlink" href="#defining-security-the-real-ideal-paradigm" title="Link to this heading">#</a></h2>
<p>The most common way to define security for MPC protocols is via the <em>real/ideal paradigm</em>. The idea is to define two artifacts:</p>
<ol class="arabic simple">
<li><p>The <em>ideal functionality</em>, which computes an output with the aid of a <em>trusted third party</em></p></li>
<li><p>The <em>protocol</em>, which computes an output without the use of a trusted third party</p></li>
</ol>
<p>Even though it’s not called a protocol, the ideal functionality is usually written like one: it’s specified in terms of a set of parties and the messages they send each other. The difference is that the ideal functionality includes an imaginary party who doesn’t exist in the real world: a trusted third party, assumed to be honest and trusted by all of the other parties.</p>
<p>Security of the protocol is defined by relating the ideal functionality and the protocol. We say that a protocol <em>securely realizes</em> an ideal functionality if:</p>
<ol class="arabic simple">
<li><p>It’s correct: the outputs of the ideal functionality and protocol are identical</p></li>
<li><p>It reveals no additional information: the adversary does not learn anything extra by observing execution of the protocol, compared to what they learn by observing execution of the ideal functionality</p></li>
</ol>
<p>The ideal functionality serves as the <em>specification</em> of what security means for the protocol we’re defining - it defines what information is allowed to leak out to the adversary.</p>
<p>Why do we define security this way? Why can’t we just say that the protocol reveals <em>nothing</em> to the adversary? A definition like that would actually be <em>too</em> strong: it would prevent us from writing useful protocols, because most protocols reveal some information <em>on purpose</em>, via the protocol’s output. Using the ideal functionality as a specification of allowed leakage makes it possible to define useful protocols while precisely limiting what the adversary can learn.</p>
<div class="seealso admonition">
<p class="admonition-title">Further reading: Real/Ideal Paradigm</p>
<p>For more information on the real/ideal paradigm, see <strong>Section 2.3 of <a class="reference external" href="https://securecomputation.org">Pragmatic MPC</a>.</strong></p>
</div>
<section id="the-ideal-world-and-ideal-functionality">
<h3>The Ideal World and Ideal Functionality<a class="headerlink" href="#the-ideal-world-and-ideal-functionality" title="Link to this heading">#</a></h3>
<p>The ideal functionality is essentially the protocol we would write in the <em>ideal world</em>: a world that has a trusted third party who is honest (not corrupted by the adversary) and whom everybody trusts. The ideal world doesn’t exist - if we had a trusted third party, we wouldn’t need secure protocols in the first place!</p>
<p>An ideal functionality looks like a protocol, but involves a special party (the trusted third party) whose name usually matches the name of the functionality you’re defining. For example, our summation protocol might have an ideal functionality called <span class="math notranslate nohighlight">\(\mathcal{F}_\text{sum}\)</span>, and the trusted third party in its definition would also be called <span class="math notranslate nohighlight">\(\mathcal{F}_\text{sum}\)</span>. Figures 2.1, 2.2, and 2.3 in <a class="reference external" href="https://securecomputation.org">Pragmatic MPC</a> define some commonly-used ideal functionalities using this kind of notation.</p>
<p>We’ll define ideal functionalities by writing them in the same style as protocols, but we’ll use an additional party whose name matches the name of the functionality. Ideal functionalities will generally (but not always) follow a simple structure:</p>
<ol class="arabic simple">
<li><p>The parties send their inputs to the functionality (the trusted third party)</p></li>
<li><p>The functionality computes the outputs locally</p></li>
<li><p>The functionality sends the outputs to the appropriate parties</p></li>
</ol>
<p>Since one party (the functionality) is allowed to know all the inputs at once, the ideal functionality is usually simple and easy to define. Here’s an ideal functionality for our summation task:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">GF</span> <span class="o">=</span> <span class="n">galois</span><span class="o">.</span><span class="n">GF</span><span class="p">(</span><span class="mi">97</span><span class="p">)</span>

<span class="n">p1</span> <span class="o">=</span> <span class="n">pychor</span><span class="o">.</span><span class="n">Party</span><span class="p">(</span><span class="s1">&#39;p1&#39;</span><span class="p">)</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">pychor</span><span class="o">.</span><span class="n">Party</span><span class="p">(</span><span class="s1">&#39;p2&#39;</span><span class="p">)</span>
<span class="n">Fsum</span> <span class="o">=</span> <span class="n">pychor</span><span class="o">.</span><span class="n">Party</span><span class="p">(</span><span class="s1">&#39;Fsum&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">functionality_sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">x</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">Fsum</span><span class="p">)</span>
    <span class="n">y</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">Fsum</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="n">total</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Fsum</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">total</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">Fsum</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">total</span>
</pre></div>
</div>
</div>
</div>
<p>Since we’ve implemented it, we can run the functionality just like a regular protocol. But it’s not common to do this - the ideal functionality’s purpose is to serve as a specification rather than an implementation.</p>
</section>
<section id="the-real-world">
<h3>The Real World<a class="headerlink" href="#the-real-world" title="Link to this heading">#</a></h3>
<p>In the <em>real world</em>, no trusted third party is available, so we run the protocol we’ve written that doesn’t require one. Here’s a copy of the summation protocol. To prove the protocol is secure, we want to prove that it doesn’t reveal any more information to the adversary than the ideal functionality does.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">protocol_sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">share</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">share</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">x2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">y1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">sum1</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">y1</span>
    <span class="n">sum2</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">y2</span>
    <span class="n">sum1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">sum2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">reconstruct</span><span class="p">([</span><span class="n">sum1</span><span class="p">,</span> <span class="n">sum2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">total</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="the-simulator-and-simulator-security">
<h2>The Simulator and Simulator Security<a class="headerlink" href="#the-simulator-and-simulator-security" title="Link to this heading">#</a></h2>
<p>How do we prove that the adversary doesn’t learn more in the real world (by observing the protocol) than they do in the ideal world (by observing the functionality)?</p>
<p>For most MPC protocols, proving security in the presence of a <em>semi-honest adversary</em> is done by showing the existence of a <em>simulator</em> (usually by actually constructing it). The simulator is a program that simulates what the adversary would have seen during an execution of the protocol, without actually running the protocol, and <em>without access to the inputs of the honest parties</em>. The proof is successful if it’s impossible to distinguish between observations of the simulator and observations of the real protocol.</p>
<section id="proving-correctness">
<h3>Proving Correctness<a class="headerlink" href="#proving-correctness" title="Link to this heading">#</a></h3>
<p>Before we can prove security, we need to prove that the protocol is correct: it computes the same thing as the ideal functionality. This part of the proof is usually easier than proving security, since protocols are generally constructed to make it easy to see correctness - and correctness of the protocol is usually pretty easy to test just by running it.</p>
<p>In our summation example, the ideal functionality clearly computes the result <span class="math notranslate nohighlight">\(total = x + y\)</span> and returns <code class="docutils literal notranslate"><span class="pre">total</span></code> to both parties. In the protocol, both parties compute:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
total &amp;= sum1 + sum2 \tag{definition of the protocol}\\
&amp;= x1 + y1 + x2 + y2 \tag{definition of the protocol}\\
&amp;= (x1 + x2) + (y1 + y2) \tag{algebra}\\
&amp;= x + y \tag{definition of secret sharing}\\
\end{align*}
\end{split}\]</div>
<p>So, we know that <code class="docutils literal notranslate"><span class="pre">functionality_sum(x,</span> <span class="pre">y)</span> <span class="pre">=</span> <span class="pre">protocol_sum(x,</span> <span class="pre">y)</span></code>.</p>
</section>
<section id="proving-semi-honest-security-with-a-simulator">
<h3>Proving Semi-Honest Security with a Simulator<a class="headerlink" href="#proving-semi-honest-security-with-a-simulator" title="Link to this heading">#</a></h3>
<p>The idea behind simulator proofs is to show that:</p>
<ul class="simple">
<li><p>Anything the adversary can learn by observing the execution of the protocol</p></li>
<li><p>They <em>could have learned</em> by observing the execution of the ideal functionality</p></li>
</ul>
<p>If we can prove this, then it means <em>the protocol reveals no more information than the ideal functionality</em>, which is our definition of security.</p>
<p>How do we prove this? We do it by building a <em>simulator</em>: a program that represents a constructive proof of the above bullet points. In particular, the simulator must:</p>
<ul class="simple">
<li><p>Compute everything the adversary can observe during execution of the protocol</p></li>
<li><p>With access only to the results of the ideal functionality, and <em>without</em> access to the inputs of the honest parties</p></li>
</ul>
<p>This might sound tricky: how do we compute everything the adversary observes, if we’re missing some of the input? The property that makes it possible is that the simulator <em>does</em> have access to the <em>output</em> of the ideal functionality, and most simulator proofs use the output to “work backwards” to the other values the adversary observes during the protocol.</p>
<p>To build a correct simulator, we’ll use a structured form of <em>hybrid argument</em>. The simulator must compute values for the things observed by the adversary such that the joint probability distribution over these values is identical between the simulator and real protocol. Following a structured approach helps ensure we don’t make a mistake.</p>
<p>A <em>hybrid argument</em> involves starting from the original protocol (using all of the inputs), and then modifying the program step by step until we arrive at the simulator (using only the corrupt party’s inputs). Each step in the chain is called a <em>hybrid</em>. For more information on the hybrid technique, see <a class="reference external" href="https://joyofcryptography.com/provsec/#sec.prove">Section 2.4 of <em>The Joy of Cryptography</em></a>.</p>
<p>Constructing the simulator only proves <em>semi-honest security</em>, because we assume that the parties correctly execute the protocol. Proving malicious security is related but more complicated; see <a class="reference external" href="https://securecomputation.org">Section 2.3.3 of Pragmatic MPC</a> for details.</p>
<p>When we build a simulator, we need to decide which parties are corrupted. To ensure security for all parties, we need to build separate simulators for each possible subset of corrupted parties, or a general simulator that works for any of these subsets. In many cases, we can assume a particular party is corrupted, build the simulator, and then argue that the same idea generalizes to other parties. For now, to simplify the proof, we’ll assume that <em>P1 is corrupted</em> and <em>P2 is honest</em>.</p>
<p>For our summation example, we’ll start with <code class="docutils literal notranslate"><span class="pre">protocol_sum</span></code>, but extended with one extra argument: the output of the ideal functionality. The adversary will clearly observe the same values as the real protocol in this hybrid, since it’s identical to the real protocol.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hyb1_sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">functionality_output</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">share</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">share</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">x2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">y1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">sum1</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">y1</span>
    <span class="n">sum2</span> <span class="o">=</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">y2</span>
    <span class="n">sum1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">sum2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">reconstruct</span><span class="p">([</span><span class="n">sum1</span><span class="p">,</span> <span class="n">sum2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">total</span>
</pre></div>
</div>
</div>
</div>
<p>The structure of our proof will involve two kinds of steps:</p>
<ol class="arabic simple">
<li><p>We’ll maintain a set of <em>constraints</em>: mathematical equations we know are true. We’ll introduce and manipulate constraints using <em>constraint moves</em>, described next.</p></li>
<li><p>We’ll build new hybrids in the sequence using <em>hybrid moves</em>, described after that.</p></li>
</ol>
<p>The last hybrid in the sequence will be the simulator.</p>
<section id="constraint-moves">
<h4>Constraint Moves<a class="headerlink" href="#constraint-moves" title="Link to this heading">#</a></h4>
<p>During our proof, we’ll need to keep track of facts we know are true and manipulate them to come up with new facts. To do this, we’ll introduce <em>constraints</em> and use them in the proof. A constraint is just an equation involving some of the program variables. The following <em>constraint moves</em> are valid rules of thumb you can use to introduce and manipulate constraints.</p>
<div class="important admonition">
<p class="admonition-title">Constraint Move: Output Correctness</p>
<p>If the protocol is correct (its output is equal to the ideal functionality’s output) then you can introduce a constraint saying that the two are equal.</p>
<p>Why it’s allowed: The protocol’s output has already been shown to be equal to the ideal functionality’s output.</p>
</div>
<div class="important admonition">
<p class="admonition-title">Constraint Move: Constraint Introduction</p>
<p>If the protocol contains the statement <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">e</span></code> then you can introduce the constraint <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">e</span></code>.</p>
<p>Why it’s allowed: The protocol enforces this constraint by explicitly computing it.</p>
</div>
<div class="important admonition">
<p class="admonition-title">Constraint Move: Algebra</p>
<p>You can perform algebra on constraints to derive new constraints.</p>
<p>Why it’s allowed: Algebraic operations don’t change the validity of the set of constraints.</p>
</div>
</section>
<section id="hybrid-moves">
<h4>Hybrid Moves<a class="headerlink" href="#hybrid-moves" title="Link to this heading">#</a></h4>
<p>To actually build new hybrids in the sequence, we’ll need to modify the program. We’ll make these modifications using the following <em>hybrid moves</em>, valid rules of thumb for modifying a hybrid to build a new one without changing the joint distribution over the observations of the adversary.</p>
<div class="important admonition">
<p class="admonition-title">Hybrid Move: Constraint Application</p>
<p>If the protocol contains the statement <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">e1</span></code> where <code class="docutils literal notranslate"><span class="pre">e1</span></code> is some expression, and you have the constraint <code class="docutils literal notranslate"><span class="pre">e1</span> <span class="pre">=</span> <span class="pre">e2</span></code> where <code class="docutils literal notranslate"><span class="pre">e2</span></code> is some expression, then you can replace the statement with <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">e2</span></code>.</p>
<p>Why it’s allowed: Constraints are assumed to be true, and they give you an alternative way to compute the same thing.</p>
</div>
<div class="important admonition">
<p class="admonition-title">Hybrid Move: Unused Share</p>
<p>If the protocol contains the statement <code class="docutils literal notranslate"><span class="pre">x1,</span> <span class="pre">x2</span> <span class="pre">=</span> <span class="pre">share(x)</span></code> and <code class="docutils literal notranslate"><span class="pre">x1</span></code> is not used in the rest of the protocol, then you can replace the statement with <code class="docutils literal notranslate"><span class="pre">x2</span> <span class="pre">=</span> <span class="pre">random()</span></code>.</p>
<p>Why it’s allowed: A single secret share in isolation appears uniformly random and gives no information about the secret.</p>
</div>
<div class="important admonition">
<p class="admonition-title">Hybrid Move: Unused Variable</p>
<p>If the protocol contains the statement <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">e</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> is not used in the rest of the protocol, then you can delete the statement.</p>
<p>Why it’s allowed: Unused values don’t affect the protocol’s behavior.</p>
</div>
</section>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h4>
<p>Starting from <code class="docutils literal notranslate"><span class="pre">hyb1_sum</span></code> above, let’s build the proof! First, we’ll introduce some constraints. We annotate each new constraint with the constraint move that supports its validity.</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">total</span></code> = <code class="docutils literal notranslate"><span class="pre">functionality_output</span></code> (output correctness)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">total</span></code> = <code class="docutils literal notranslate"><span class="pre">sum1</span> <span class="pre">+</span> <span class="pre">sum2</span></code> (constraint introduction)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum1</span></code> = <code class="docutils literal notranslate"><span class="pre">x1</span> <span class="pre">+</span> <span class="pre">y1</span></code> (constraint introduction)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum2</span></code> = <code class="docutils literal notranslate"><span class="pre">x2</span> <span class="pre">+</span> <span class="pre">y2</span></code> (constraint introduction)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum2</span></code> = <code class="docutils literal notranslate"><span class="pre">functionality_output</span> <span class="pre">-</span> <span class="pre">sum1</span></code> (algebra on 1, 2, 3, 4)</p></li>
</ol>
<p>Now, we can the last constraint to make hybrid moves and progress toward the simulator.</p>
<p>First, we use the <strong>Constraint Application</strong> move with constraint 5 to replace the definition of <code class="docutils literal notranslate"><span class="pre">sum2</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hyb2_sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">functionality_output</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">share</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">share</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">x2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">y1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">sum1</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">y1</span>
    <span class="n">sum2</span> <span class="o">=</span> <span class="n">functionality_output</span> <span class="o">-</span> <span class="n">sum1</span>
    <span class="n">sum1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">sum2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">reconstruct</span><span class="p">([</span><span class="n">sum1</span><span class="p">,</span> <span class="n">sum2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">total</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we observe that <code class="docutils literal notranslate"><span class="pre">y2</span></code> is defined, but is never used in the program! So, we use the <strong>Unused Share</strong> move to eliminate <code class="docutils literal notranslate"><span class="pre">y2</span></code> from the program and replace <code class="docutils literal notranslate"><span class="pre">y1</span></code> with a random value. Once we’ve made this move, the honest party’s input (<code class="docutils literal notranslate"><span class="pre">y</span></code>) is also no longer used, so we can eliminate it from the set of inputs to the program.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hyb3_sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">functionality_output</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">share</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">constant</span><span class="p">(</span><span class="n">GF</span><span class="o">.</span><span class="n">Random</span><span class="p">())</span>
    <span class="n">x2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">y1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">sum1</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">y1</span>
    <span class="n">sum2</span> <span class="o">=</span> <span class="n">functionality_output</span> <span class="o">-</span> <span class="n">sum1</span>
    <span class="n">sum1</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
    <span class="n">sum2</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">reconstruct</span><span class="p">([</span><span class="n">sum1</span><span class="p">,</span> <span class="n">sum2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">total</span>
</pre></div>
</div>
</div>
</div>
<p>This hybrid is our simulator! From the adversary’s perspective, it’s indistinguishable from the real protocol, given the output of the ideal functionality, due to the hybrid argument that <code class="docutils literal notranslate"><span class="pre">protocol_sum</span> <span class="pre">==</span> <span class="pre">hyb1_sum</span> <span class="pre">==</span> <span class="pre">hyb2_sum</span> <span class="pre">==</span> <span class="pre">hyb3_sum</span></code>. Since we’re able to build this simulator, and it doesn’t use P2’s input at all, we can say that the protocol <em>securely realizes the ideal functionality</em> in the presence of a semi-honest adversary when P1 is corrupted and P2 is honest.</p>
<p>It’s easy to see that a similar set of moves would let us build a sequence of hybrids for the case where P2 is corrupted and P1 is honest, since the protocol is essentially symmetric between the parties.</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="chapter02.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Additive Secret Sharing</p>
      </div>
    </a>
    <a class="right-next"
       href="chapter04.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Multiplication Triples</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#threat-models">Threat Models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-adversary-and-corruption">The Adversary and Corruption</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#semi-honest-and-malicious-security">Semi-Honest and Malicious Security</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#honest-and-dishonest-majorities">Honest and Dishonest Majorities</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#how-many-participants">How Many Participants?</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#defining-security-the-real-ideal-paradigm">Defining Security: The Real/Ideal Paradigm</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-ideal-world-and-ideal-functionality">The Ideal World and Ideal Functionality</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-real-world">The Real World</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-simulator-and-simulator-security">The Simulator and Simulator Security</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#proving-correctness">Proving Correctness</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#proving-semi-honest-security-with-a-simulator">Proving Semi-Honest Security with a Simulator</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#constraint-moves">Constraint Moves</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#hybrid-moves">Hybrid Moves</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Joseph P. Near
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>